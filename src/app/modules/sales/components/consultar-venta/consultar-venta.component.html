<div class="container" style="padding-top: 3%;">
  <div class="container">
    <div class="row">
      <div class="col-md-3 col-sm-12" style="padding: 1%;">
        <label for="id">Id</label>
        <input id="id" type="text" name="id" class="form-control" placeholder="Id de la venta" [(ngModel)]="venta.id">
      </div>
      <div class="col-md-3 col-sm-12" style="padding: 1%;">
        <label>Cliente</label>
        <input type="text" class="form-control" name="cliente" placeholder="Nombre del cliente"
          [(ngModel)]="venta.id_cliente">
      </div>
      <div class="col-md-3 col-sm-12" style="padding: 1%;">
        <label>Vendedor</label>
        <input type="text" class="form-control" id="vendedor" name="vendedor" placeholder="Nombre del vendedor"
          [(ngModel)]="venta.id_vendedor">
      </div>
    </div>
    <div class="row">
      <div class="col-md-3 col-sm-12" style="padding: 1%;">
        <label>Forma de Entrega</label>
        <select class="form-control" id="formaEntrega" name="formaEntrega" [(ngModel)]="venta.forma_entrega">
          <option disabled selected value="">Selecciona la forma de entrega de la venta</option>
          <option value="1">Envío a domicilio</option>
          <option value="2">Recogida en tienda</option>
        </select>
      </div>
      <div class="col-md-3 col-sm-12" style="padding: 1%;">
        <label>Tipo de Venta</label>
        <select class="form-control" id="tipo_venta" name="tipo_venta" [(ngModel)]="venta.tipo_venta">
          <option disabled selected>Selecciona el tipo de venta</option>
          <option value="1">Mayorista</option>
          <option value="2">Minorista</option>
        </select>
      </div>
      <div class="col-md-3 col-sm-12" style="padding: 1%;">
        <label>Monto Desde:</label>
        <input type="number" class="form-control" id="montoDesde" placeholder="Monto desde a filtrar" name="montoDesde"
          [(ngModel)]="montoDesde">
      </div>
      <div class="col-md-3 col-sm-12" style="padding: 1%;">
        <label>Monto Hasta:</label>
        <input type="number" class="form-control" id="montoHasta" placeholder="Monto hasta filtrar" name="montoH"
          [(ngModel)]="montoHasta">
      </div>
    </div>
    <div class="row">
      <div class="col-md-3 col-sm-12" style="padding: 1%;">
        <label>Fecha Desde:</label>
        <input type="date" class="form-control" id="fechaDesde" name="fechaDesde" [(ngModel)]="fechaDesde">
      </div>
      <div class="col-md-3 col-sm-12" style="padding: 1%;">
        <label>Fecha Hasta:</label>
        <input type="date" class="form-control" id="fechaHasta" name="fechaHasta" [(ngModel)]="fechaHasta">
      </div>
      <div class="col-md-3 col-sm-12" style="padding: 1%;">
        <label>Estado</label>
        <select class="form-control" id="estado" name="estado" [(ngModel)]="venta.estado">
          <option disabled selected value="">Selecciona el estado de la venta</option>
          <option value="1">Pendiente</option>
          <option value="2">Entregado</option>
        </select>
      </div>
      <div class="col-md-3 col-sm-6" style="padding-top: 3%;">
        <div class="row">
          <div class="col-md-6">
            <button type="submit" class="btn btn-outline-dark" style="width: 100%;"
              (click)="filtrarVentas()">Buscar</button>
          </div>
          <div class="col-md-6">
            <button type="submit" class="btn btn-outline-secondary" style="width: 100%;"
              (click)="limpiarCampos()">Reiniciar</button>
          </div>
        </div>
      </div>
    </div>
    <br>
    <div class="table-responsive">
      <table class="table table-striped table-bordered table-hover">
        <thead class="thead">
          <tr>
            <th class="centered">ID</th>
            <th class="centered">Cliente</th>
            <th class="centered">Vendedor</th>
            <th class="centered">Fecha</th>
            <th class="centered">Forma de Entrega</th>
            <th class="centered">Tipo de Pedido</th>
            <th class="centered">Estado</th>
            <th class="centered">Monto</th>
            <th style="text-align: center; margin-top: 3%;">Ver<br> Detalle</th>
            <th style="text-align: center; margin-top: 3%;">Modificar<br> Venta</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let venta of ventas">
            <td>{{ venta.id }}</td>
            <td>{{ venta.id_cliente }}</td>
            <td>{{ venta.id_vendedor }}</td>
            <td>{{ venta.fecha | date: 'dd/MM/yyyy' }}</td>
            <td>{{ venta.forma_entrega }}</td>
            <td>{{ venta.tipo_venta }}</td>
            <td>{{ venta.estado }}</td>
            <td>{{ venta.total | currency:'USD':'symbol':'1.2-2' }}</td>
            <td>
              <button class="btn btn-outline-dark btn-sm custom-btn" (click)="verDetalle(venta)">
                <i class="fas fa-eye fa-lg" style="color: rgb(202, 214, 210);"></i>
              </button>
            </td>
            <td>
              <button class="btn btn-outline-dark btn-sm custom-btn" (click)="modificarVenta(venta.id)">
                <i class="fas fa-eye fa-lg" style="color: rgb(202, 214, 210);"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="container" *ngIf="mostrarDetalle">
    <h3 class="h4">Detalles</h3>
    <table class="table table-striped table-bordered table-hover">
      <thead class="thead">
        <tr>
          <th>Producto</th>
          <th>Descripción</th>
          <th>Cantidad</th>
          <th>Precio Unitario</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let detalle of venta.detalles">
          <td>{{ detalle.id_producto }}</td>
          <td>{{ detalle.descripcion }}</td>
          <td>{{ detalle.cantidad }}</td>
          <td>{{ detalle.precio_unitario | currency:'USD':'symbol':'1.2-2' }}</td>
        </tr>
      </tbody>
    </table>
    <div class="container" *ngIf="mostrarActualizarEstado">
      <h3 class="h4">Modificar Estado</h3>
      <div class="row" style="padding-top: 1%;">
        <div class="col-md-3 col-sm-12">
          <label>Estado</label>
        </div>
        <div class="col-md-3 col-sm-12">
          <select class="form-control" id="estado" name="estado" [(ngModel)]="nuevoEstado">
            <option [value]="1" [selected]="venta.estado === 1">Pendiente</option>
            <option [value]="2" [selected]="venta.estado === 2">Entregado</option>
          </select>
        </div>
        <div class="col-md-3 col-sm-12">
          <button type="submit" class="btn btn-outline-dark" style="width: 100%;"
            (click)="actualizarEstado()">Actualizar</button>
        </div>
      </div>
    </div>
  </div>