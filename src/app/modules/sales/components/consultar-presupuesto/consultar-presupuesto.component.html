<div class="container" style="padding-top: 3%;">
    <div class="container">
      <div class="row">
        <div class="col-md-3 col-sm-12" style="padding: 1%;">
          <label for="id">Id</label>
          <input id="id" type="text" name="id" class="form-control" placeholder="Id del presupuesto" [(ngModel)]="presupuesto.id">
        </div>
        <div class="col-md-3 col-sm-12" style="padding: 1%;">
          <label>Cliente</label>
          <select class="form-control" id="cliente" name="cliente" [(ngModel)]="presupuesto.doc_cliente">
            <option disabled selected value="">Selecciona el cliente del presupuesto</option>
            <option value="1">Cande</option>
            <option value="2">Tomi</option>
          </select>
        </div>
        <div class="col-md-3 col-sm-12" style="padding: 1%;">
          <label>Tipo de Venta</label>
          <select class="form-control" id="tipo_venta" name="tipo_venta" [(ngModel)]="presupuesto.tipo_ventas">
            <option disabled selected>Selecciona el tipo de venta</option>
            <option value="1">Mayorista</option>
            <option value="2">Minorista</option>
          </select>
        </div>
        <div class="col-md-3 col-sm-12" style="padding: 1%;">
          <label>Monto Desde:</label>
          <input type="number" class="form-control" id="montoDesde" placeholder="Monto desde a filtrar" name="montoDesde" [(ngModel)]="montoDesde">
        </div>
        <div class="col-md-3 col-sm-12" style="padding: 1%;">
          <label>Monto Hasta:</label>
          <input type="number" class="form-control" id="montoHasta" placeholder="Monto hasta filtrar" name="montoH"  [(ngModel)]="montoHasta">
        </div>
      </div>
      <div class="row">
        <div class="col-md-3 col-sm-12" style="padding: 1%;">
          <label>Fecha Desde:</label>
          <input type="date" class="form-control" id="fechaDesde" name="fechaDesde" [(ngModel)]="fechaDesde">
        </div>
        <div class="col-md-3 col-sm-12" style="padding: 1%;">
          <label>Fecha Hasta:</label>
          <input type="date" class="form-control" id="fechaHasta" name="fechaHasta" [(ngModel)]="fechaHasta">
        </div>
        <div class="col-md-3 col-sm-6" style="padding-top: 3%;">
          <div class="row">
            <div class="col-md-6">
              <button type="submit" class="btn btn-outline-dark" style="width: 100%;" (click)="filtrarPresupuestos()">Buscar</button>
            </div>
            <div class="col-md-6">
              <button type="submit" class="btn btn-outline-secondary" style="width: 100%;" (click)="limpiarCampos()">Reiniciar</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <br>
    <div class="table-responsive">
      <table class="table table-striped table-bordered table-hover" style="align-content: center;">
        <thead class="thead">
          <tr>
            <th class="centered">ID</th>
            <th class="centered">Cliente</th>
            <th class="centered">Fecha de Creación</th>
            <th class="centered">Tipo de Pedido</th>
            <th class="centered">Monto</th>
            <th style="text-align: center; margin-top: 3%;">Ver<br> Detalle</th>
            <th class="centered">Modificar <br>Presupuesto</th>
            <!-- <th style="text-align: center; margin-top: 3%;">Modificar<br> Venta</th> -->
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let presupuesto of presupuestos">
            <td class="centered">{{ presupuesto.id }}</td>
            <td class="centered">{{ presupuesto.cod_cliente }}</td>
            <td class="centered">{{ presupuesto.fecha_creacion | date: 'dd/MM/yyyy' }}</td>
            <td class="centered">{{ presupuesto.tipo_venta === 1 ? 'Minorista' : presupuesto.tipo_venta === 2 ? 'Mayorista' : '' }}</td>
            <td class="centered">{{ presupuesto.precio_total | currency:'USD':'symbol':'1.2-2' }}</td>
            <td class="centered">
              <button class="btn btn-outline-dark btn-sm custom-btn" (click)="verDetalle(presupuesto)">
                <i class="fas fa-eye fa-lg" style="color: rgb(202, 214, 210);"></i>
              </button>
            </td>
            <td class="centered">
              <button class="btn btn-outline-dark btn-sm custom-btn" >
                <i class="fas fa-eye fa-lg" style="color: rgb(202, 214, 210);"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  
    <div class="container" *ngIf="mostrarDetalle">
      <h3 class="h4">Detalles</h3>
      <table class="table table-striped table-bordered table-hover">
        <thead class="thead">
          <tr>
            <th class="centered">Producto</th>
            <th class="centered">Descripción</th>
            <th class="centered">Cantidad</th>
            <th class="centered">Precio Unitario</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let detalle of presupuesto.detalles">
            <td class="centered">{{ detalle.cod_producto }}</td>
            <td class="centered">{{ detalle.descripcion }}</td>
            <td class="centered">{{ detalle.cantidad }}</td>
            <td class="centered">{{ detalle.precio_unitario | currency:'USD':'symbol':'1.2-2' }}</td>
          </tr>
        </tbody>
      </table>
      
    </div>
  </div>